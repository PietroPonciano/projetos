<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leprechaun</title>
    <style>body {
        font-family: 'Arial', sans-serif;
        background-color: #eaeaea;
        color: #333;
        margin: 0;
        padding: 20px;
    }

    .container {
        max-width: 600px;
        margin: auto;
        background: #ffffff;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    h1 {
        text-align: center;
        color: #007BFF;
        margin-bottom: 20px;
    }

    .actions {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        margin: 20px 0;
    }

    input, select, button {
        flex: 1 1 48%;
        margin: 5px;
        padding: 10px;
        border: 2px solid #007BFF;
        border-radius: 5px;
        font-size: 16px;
    }

    input:focus, select:focus {
        border-color: #0056b3;
        outline: none;
    }

    button {
        background-color: #007BFF;
        color: white;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
    }

    button:hover {
        background-color: #0056b3;
        transform: translateY(-2px);
    }

    button:active {
        transform: translateY(1px);
    }

    .mensagem {
        color: red;
        margin-top: 10px;
    }

    /* Modal Styles */
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.7);
        padding-top: 60px;
    }

    .modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 600px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }

    #mensagemModal .modal-content {
        text-align: center;
    }

    .educacao-financeira {
        margin-top: 20px;
    }

    .educacao-financeira h2 {
        text-align: center;
        color: #007BFF;
    }

    .educacao-financeira ul {
        list-style-type: none;
        padding: 0;
    }

    .educacao-financeira ul li {
        margin: 10px 0;
    }

    .educacao-financeira ul li a {
        text-decoration: none;
        color: #007BFF;
        transition: color 0.2s;
    }

    .educacao-financeira ul li a:hover {
        color: #0056b3;
        text-decoration: underline;
    }

    .descricao {
        margin-top: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f9f9f9;
        display: none; /* Oculta inicialmente */
    }
</style>
</head>
<body>
    <div class="container">
        <h1>Bolsa de Valores</h1>
        <div id="saldo"></div>
        <div id="portfolio"></div>
        <div id="empresas"></div>
        <div class="actions">
            <input type="number" id="quantidade" placeholder="Quantidade" min="1">
            <select id="acaoSelect"></select>
            <button id="comprarBtn">Comprar Ações</button>
            <button id="venderBtn">Vender Ações</button>
            <button id="passarRodadaBtn">Passar Rodada</button>
            <button id="recomeçarBtn">Recomeçar Jogo</button>
        </div>
        <div id="resultado"></div>
        <h3 id="dicas"></h3>
        <div id="conquistas"></div>

        <div class="educacao-financeira">
            <h2>Educação Financeira</h2>
            <ul>
                <li>
                    <a href="#" onclick="mostrarDescricao('acoes')">O que são ações?</a>
                    <div id="descricao-acoes" class="descricao">
                        As ações representam uma fração do capital de uma empresa. Quando uma pessoa compra ações, ela se torna sócia da empresa, participando dos lucros e dos riscos. As ações são negociadas em bolsas de valores, e seu valor pode variar de acordo com a performance da empresa, as condições de mercado e outros fatores econômicos. Investir em ações é uma forma popular de buscar crescimento de patrimônio, mas também envolve riscos, pois o valor das ações pode cair.<br><br>
                        <strong>Tipos de Ações:</strong><br>
                        <ul>
                            <li>Ações Ordinárias: Dão direito a voto nas assembleias da empresa e participação nos lucros.</li>
                            <li>Ações Preferenciais: Geralmente, não conferem direito a voto, mas têm prioridade no pagamento de dividendos.</li>
                        </ul>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="mostrarDescricao('diversificacao')">Diversificação de Portfólio</a>
                    <div id="descricao-diversificacao" class="descricao">
                        A diversificação de portfólio é uma estratégia que consiste em distribuir investimentos entre diferentes ativos, como ações, títulos, imóveis e commodities, para reduzir riscos. A ideia central é que, ao investir em ativos que não estão correlacionados entre si, as perdas em um investimento podem ser compensadas pelos ganhos em outro.<br><br>
                        <strong>Benefícios da Diversificação:</strong><br>
                        <ul>
                            <li>Redução do Risco: Minimiza o impacto negativo de um ativo no portfólio.</li>
                            <li>Estabilidade: Ajuda a manter retornos mais consistentes ao longo do tempo.</li>
                            <li>Acesso a Oportunidades: Permite que investidores se beneficiem de diferentes setores e mercados.</li>
                        </ul>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="mostrarDescricao('analise')">Análise de Mercado</a>
                    <div id="descricao-analise" class="descricao">
                        A análise de mercado envolve o estudo das condições econômicas, tendências e eventos que podem impactar o desempenho de ativos financeiros. Existem duas principais abordagens:<br><br>
                        <strong>1. Análise Fundamental:</strong> Avalia a saúde financeira e o valor intrínseco de uma empresa, examinando dados como lucros, receita e dívidas.<br>
                        <strong>2. Análise Técnica:</strong> Examina gráficos e padrões de preços para prever movimentos futuros de mercado, focando em dados históricos e indicadores técnicos.<br><br>
                        <strong>Importância da Análise de Mercado:</strong><br>
                        <ul>
                            <li>Tomada de Decisões: Ajuda investidores a tomar decisões informadas sobre compra e venda de ativos.</li>
                            <li>Identificação de Tendências: Permite a antecipação de movimentos de mercado e identificação de oportunidades.</li>
                        </ul>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="mostrarDescricao('riscos')">Riscos e Retornos</a>
                    <div id="descricao-riscos" class="descricao">
                        Investir em ações e outros ativos financeiros envolve riscos e potencial de retorno. O retorno é o lucro gerado pelo investimento, enquanto o risco é a possibilidade de perda. A relação entre risco e retorno é fundamental no mundo dos investimentos:<br><br>
                        <strong>Tipos de Riscos:</strong><br>
                        <ul>
                            <li>Risco de Mercado: Flutuações nos preços de mercado.</li>
                            <li>Risco de Crédito: Possibilidade de um emissor de título não pagar sua dívida.</li>
                            <li>Risco de Liquidez: Dificuldade em vender um ativo sem afetar seu preço.</li>
                        </ul>
                        <strong>Risco vs. Retorno:</strong><br>
                        Investimentos que oferecem maior potencial de retorno geralmente vêm acompanhados de maior risco. Por isso, é importante que os investidores avaliem seu perfil de risco e seus objetivos financeiros ao escolher onde investir.
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div id="mensagemModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="fecharMensagemModal()">&times;</span>
            <p id="mensagemTexto"></p>
        </div>
    </div>

    <div id="instrucoesModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="fecharInstrucoes()">&times;</span>
            <h2>Instruções do Jogo</h2>
            <p>Bem-vindo ao jogo da Bolsa de Valores!</p>
            <p>O objetivo do jogo é comprar e vender ações de diferentes empresas para aumentar seu saldo.</p>
            <ul>
                <li>Você começa com um saldo aleatório entre $500 e $2000.</li>
                <li>As ações das empresas variam de preço a cada rodada.</li>
                <li>Use os botões para comprar ou vender ações e passar as rodadas.</li>
                <li>O jogo termina após 10 rodadas. Seu saldo final será exibido.</li>
            </ul>
            <button id="startGameBtn">Começar Jogo</button>
        </div>
    </div>

    <script>
        class Empresa {
            constructor(nome, precoInicial) {
                this.nome = nome;
                this.preco = precoInicial;
                this.variacaoAlerta = false;
            }

            atualizarPreco() {
                const variacao = (Math.random() * 0.2 - 0.1);
                const novoPreco = Math.max(1, this.preco * (1 + variacao));
                this.variacaoAlerta = Math.abs((novoPreco - this.preco) / this.preco) > 0.1;
                this.preco = novoPreco;
            }
        }

        class BolsaDeValores {
            constructor() {
                this.empresas = [
                    new Empresa("TechCorp", 100),
                    new Empresa("BioHealth", 200),
                    new Empresa("AutoMotive", 50),
                    new Empresa("FinBank", 150)
                ];
                this.dicas = [
                    "Diversifique seu portfólio para minimizar riscos.",
                    "Investir em ações de empresas sólidas pode ser uma boa estratégia.",
                    "Fique atento às notícias que podem impactar o mercado.",
                    "O investimento a longo prazo geralmente traz melhores resultados."
                ];
                this.portfolio = {};
                this.rodadas = 1;
                this.iniciarJogo();
            }

            iniciarJogo() {
                this.saldo = Math.floor(Math.random() * 1501) + 500;
                this.atualizarPrecoAcoes();
                this.exibirSaldo();
                this.exibirPortfolio();
                this.exibirEmpresas();
                this.exibirDicas();

                document.getElementById('comprarBtn').onclick = () => this.comprarAcao();
                document.getElementById('venderBtn').onclick = () => this.venderAcao();
                document.getElementById('passarRodadaBtn').onclick = () => this.passarRodada();
                document.getElementById('recomeçarBtn').onclick = () => this.recomeçarJogo();
            }

            exibirDicas() {
                const dica = this.dicas[Math.floor(Math.random() * this.dicas.length)];
                document.getElementById('dicas').innerText = `Dica: ${dica}`;
            }

            exibirSaldo() {
                document.getElementById('saldo').innerText = `Saldo atual: $${this.saldo.toFixed(2)}`;
            }

            exibirPortfolio() {
                const portfolioDiv = document.getElementById('portfolio');
                portfolioDiv.innerHTML = "<h2>Seu Portfólio:</h2>";
                if (Object.keys(this.portfolio).length === 0) {
                    portfolioDiv.innerHTML += "<p>Você não possui ações.</p>";
                } else {
                    for (let empresa in this.portfolio) {
                        const info = this.portfolio[empresa];
                        portfolioDiv.innerHTML += `${empresa}: ${info.quantidade} ações (Preço médio: $${info.preco_medio.toFixed(2)})<br>`;
                    }
                }
            }

            exibirEmpresas() {
                const empresasDiv = document.getElementById('empresas');
                empresasDiv.innerHTML = "<h2>Preços das Ações:</h2>";
                
                const select = document.getElementById('acaoSelect');
                select.innerHTML = "";

                this.empresas.forEach((empresa, index) => {
                    empresasDiv.innerHTML += `${index + 1}. ${empresa.nome}: $${empresa.preco.toFixed(2)}<br>`;
                    
                    const option = document.createElement('option');
                    option.value = index;
                    option.text = empresa.nome;
                    select.add(option);
                });
            }

            atualizarPrecoAcoes() {
                this.empresas.forEach(empresa => {
                    empresa.atualizarPreco();
                    if (empresa.variacaoAlerta) {
                        this.exibirMensagem(`ALERTA: O preço da ação ${empresa.nome} variou mais de 10%! Novo preço: $${empresa.preco.toFixed(2)}`);
                    }
                });
                this.eventosAleatorios();
            }

            eventosAleatorios() {
                const eventos = [
                    { mensagem: "Uma crise econômica afetou o mercado!", impacto: -0.15 },
                    { mensagem: "Um novo produto foi lançado pela TechCorp!", impacto: 0.1 },
                    { mensagem: "A BioHealth anunciou resultados financeiros impressionantes!", impacto: 0.2 }
                ];

                const evento = eventos[Math.floor(Math.random() * eventos.length)];
                this.exibirMensagem(evento.mensagem);
                this.empresas.forEach(empresa => {
                    empresa.preco *= (1 + evento.impacto);
                });
            }

            comprarAcao() {
                const select = document.getElementById('acaoSelect');
                const escolha = select.value;
                const quantidade = parseInt(document.getElementById('quantidade').value);

                if (quantidade <= 0) {
                    this.exibirMensagem("Quantidade inválida!");
                    return;
                }

                const valorCompra = this.empresas[escolha].preco * quantidade;

                if (this.saldo < valorCompra) {
                    this.exibirMensagem("Saldo insuficiente para realizar a compra!");
                } else {
                    this.saldo -= valorCompra;

                    if (!this.portfolio[this.empresas[escolha].nome]) {
                        this.portfolio[this.empresas[escolha].nome] = {
                            quantidade: 0,
                            preco_medio: 0
                        };
                    }
                    const info = this.portfolio[this.empresas[escolha].nome];
                    info.quantidade += quantidade;
                    info.preco_medio = ((info.preco_medio * (info.quantidade - quantidade)) + valorCompra) / info.quantidade;

                    this.exibirSaldo();
                    this.exibirPortfolio();
                    this.exibirMensagem(`Você comprou ${quantidade} ações da ${this.empresas[escolha].nome}!`);
                }
            }

            venderAcao() {
                const select = document.getElementById('acaoSelect');
                const escolha = select.value;
                const quantidade = parseInt(document.getElementById('quantidade').value);

                if (quantidade <= 0) {
                    this.exibirMensagem("Quantidade inválida!");
                    return;
                }

                if (!this.portfolio[this.empresas[escolha].nome] || this.portfolio[this.empresas[escolha].nome].quantidade < quantidade) {
                    this.exibirMensagem("Você não possui ações suficientes para vender!");
                } else {
                    const valorVenda = this.empresas[escolha].preco * quantidade;
                    this.saldo += valorVenda;
                    this.portfolio[this.empresas[escolha].nome].quantidade -= quantidade;

                    if (this.portfolio[this.empresas[escolha].nome].quantidade === 0) {
                        delete this.portfolio[this.empresas[escolha].nome];
                    }

                    this.exibirSaldo();
                    this.exibirPortfolio();
                    this.exibirMensagem(`Você vendeu ${quantidade} ações da ${this.empresas[escolha].nome}!`);
                }
            }

            passarRodada() {
                this.rodadas++;
                if (this.rodadas > 10) {
                    this.exibirMensagem(`Jogo encerrado! Seu saldo final é $${this.saldo.toFixed(2)}.`);
                    this.recomeçarJogo();
                    return;
                }
                this.atualizarPrecoAcoes();
                this.exibirDicas();
            }

            recomeçarJogo() {
                this.empresas.forEach(empresa => {
                    empresa.preco = Math.random() * 100 + 50; // Preços iniciais aleatórios
                });
                this.portfolio = {};
                this.rodadas = 1;
                this.iniciarJogo();
            }

            exibirMensagem(mensagem) {
                document.getElementById('mensagemTexto').innerText = mensagem;
                document.getElementById('mensagemModal').style.display = "block";
            }
        }

        function mostrarDescricao(descricao) {
            const elementos = document.querySelectorAll('.descricao');
            elementos.forEach(element => element.style.display = 'none');

            const descricaoElemento = document.getElementById(`descricao-${descricao}`);
            descricaoElemento.style.display = 'block';
        }

        function fecharMensagemModal() {
            document.getElementById('mensagemModal').style.display = "none";
        }

        function fecharInstrucoes() {
            document.getElementById('instrucoesModal').style.display = "none";
        }

        document.getElementById('startGameBtn').onclick = function() {
            document.getElementById('instrucoesModal').style.display = "none";
            new BolsaDeValores();
        };

        document.getElementById('recomeçarBtn').onclick = function() {
            document.getElementById('instrucoesModal').style.display = "none";
            new BolsaDeValores();
        };

        // Inicia o jogo ao carregar a página
        window.onload = function() {
            document.getElementById('instrucoesModal').style.display = "block";
        };
    </script>
</body>
</html>
